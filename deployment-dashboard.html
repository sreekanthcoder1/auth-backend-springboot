<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Automatic Deployment Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #ddd;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .status-card.healthy {
            border-left-color: #4CAF50;
        }

        .status-card.unhealthy {
            border-left-color: #f44336;
        }

        .status-card.pending {
            border-left-color: #FF9800;
        }

        .status-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .status-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .badge-healthy {
            background: #4CAF50;
            color: white;
        }

        .badge-unhealthy {
            background: #f44336;
            color: white;
        }

        .badge-pending {
            background: #FF9800;
            color: white;
        }

        .status-details {
            color: #666;
            line-height: 1.6;
        }

        .url-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .url-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-top: 5px;
        }

        .url-link:hover {
            text-decoration: underline;
        }

        .check-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
            transition: background 0.3s ease;
        }

        .check-button:hover {
            background: #5a6fd8;
        }

        .setup-section {
            background: #f8f9fa;
            padding: 30px;
            margin-top: 30px;
            border-radius: 15px;
        }

        .setup-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setup-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .setup-step {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .step-description {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .monitoring-section {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            color: white;
        }

        .monitoring-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .metric-card {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            border-top: 1px solid #eee;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .status-grid {
                grid-template-columns: 1fr;
            }

            .setup-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üöÄ Automatic Deployment Dashboard</h1>
            <p>Monitor your authentication app's deployment status in real-time</p>
        </div>

        <div class="main-content">
            <!-- Deployment Status Cards -->
            <div class="status-grid">
                <!-- Backend Status -->
                <div class="status-card" id="backend-card">
                    <div class="status-header">
                        <div class="status-title">üîß Backend (Spring Boot)</div>
                        <div class="status-badge" id="backend-badge">Checking...</div>
                    </div>
                    <div class="status-details">
                        <p><strong>Service:</strong> Railway</p>
                        <p><strong>Environment:</strong> Production</p>
                        <p><strong>Last Deploy:</strong> <span id="backend-deploy-time">Loading...</span></p>
                        <p><strong>Health Status:</strong> <span id="backend-health">Checking...</span></p>
                    </div>
                    <div class="url-section">
                        <strong>Endpoints:</strong></strong><br>
                        <a href="#" class="url-link" id="backend-url" target="_blank">https://your-backend.up.railway.app</a><br>
                        <a href="#" class="url-link" id="backend-health-url" target="_blank">Health Check</a>
                        <button class="check-button" onclick="checkBackendHealth()">Check Now</button>
                    </div>
                </div>

                <!-- Frontend Status -->
                <div class="status-card" id="frontend-card">
                    <div class="status-header">
                        <div class="status-title">‚ö° Frontend (React)</div>
                        <div class="status-badge" id="frontend-badge">Checking...</div>
                    </div>
                    <div class="status-details">
                        <p><strong>Service:</strong> Vercel</p>
                        <p><strong>Environment:</strong> Production</p>
                        <p><strong>Last Deploy:</strong> <span id="frontend-deploy-time">Loading...</span></p>
                        <p><strong>Build Status:</strong> <span id="frontend-build">Checking...</span></p>
                    </div>
                    <div class="url-section">
                        <strong>Application:</strong><br>
                        <a href="#" class="url-link" id="frontend-url" target="_blank">https://your-app.vercel.app</a>
                        <button class="check-button" onclick="checkFrontendHealth()">Check Now</button>
                    </div>
                </div>

                <!-- Database Status -->
                <div class="status-card" id="database-card">
                    <div class="status-header">
                        <div class="status-title">üóÑÔ∏è Database (MySQL)</div>
                        <div class="status-badge" id="database-badge">Checking...</div>
                    </div>
                    <div class="status-details">
                        <p><strong>Service:</strong> Railway MySQL</p>
                        <p><strong>Environment:</strong> Production</p>
                        <p><strong>Connection:</strong> <span id="database-connection">Testing...</span></p>
                        <p><strong>Tables:</strong> <span id="database-tables">Loading...</span></p>
                    </div>
                    <div class="url-section">
                        <strong>Management:</strong><br>
                        <a href="#" class="url-link" target="_blank">Railway Dashboard</a>
                        <button class="check-button" onclick="checkDatabaseHealth()">Check Now</button>
                    </div>
                </div>

                <!-- GitHub Actions Status -->
                <div class="status-card" id="github-card">
                    <div class="status-header">
                        <div class="status-title">‚öôÔ∏è CI/CD Pipeline</div>
                        <div class="status-badge" id="github-badge">Ready</div>
                    </div>
                    <div class="status-details">
                        <p><strong>Service:</strong> GitHub Actions</p>
                        <p><strong>Last Run:</strong> <span id="github-last-run">Not yet run</span></p>
                        <p><strong>Status:</strong> <span id="github-status">Waiting for push</span></p>
                        <p><strong>Next Trigger:</strong> On git push</p>
                    </div>
                    <div class="url-section">
                        <strong>Repository:</strong><br>
                        <a href="#" class="url-link" id="github-url" target="_blank">View Actions</a>
                        <button class="check-button" onclick="openGitHubActions()">View Pipeline</button>
                    </div>
                </div>
            </div>

            <!-- Setup Guide Section -->
            <div class="setup-section">
                <div class="setup-title">üìã Setup Progress</div>
                <div class="setup-steps">
                    <div class="setup-step">
                        <div class="step-number">1</div>
                        <div class="step-title">GitHub Repository</div>
                        <div class="step-description">Create repository and push your code with GitHub Actions workflows</div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">2</div>
                        <div class="step-title">Railway Backend</div>
                        <div class="step-description">Deploy Spring Boot backend with MySQL database to Railway platform</div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">3</div>
                        <div class="step-title">Vercel Frontend</div>
                        <div class="step-description">Deploy React frontend to Vercel with environment variables configured</div>
                    </div>
                    <div class="setup-step">
                        <div class="step-number">4</div>
                        <div class="step-title">GitHub Secrets</div>
                        <div class="step-description">Configure deployment tokens and secrets for automatic CI/CD pipeline</div>
                    </div>
                </div>
            </div>

            <!-- Monitoring Section -->
            <div class="monitoring-section">
                <div class="monitoring-title">üìä Deployment Metrics</div>
                <div class="monitoring-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="total-deploys">0</div>
                        <div class="metric-label">Total Deployments</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="success-rate">100%</div>
                        <div class="metric-label">Success Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="avg-deploy-time">~3min</div>
                        <div class="metric-label">Avg Deploy Time</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="uptime">99.9%</div>
                        <div class="metric-label">Uptime</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>üöÄ Automatic Deployment Dashboard | Last updated: <span id="last-update">Never</span></p>
            <p>üìö Need help? Check the <strong>AUTOMATIC</strong>_DEPLOYMENT_SETUP.md</strong> guide</p>
        </div>
    </div>

    <script>
        // Configuration - Update these URLs after deployment
        const CONFIG = {
            backendUrl: 'https://your-backend.up.railway.app',
            frontendUrl: 'https://your-app.vercel.app',
            githubRepo: 'https://github.com/your-username/auth-app-fullstack',

            // These will be populated after setup
            railwayDashboard: 'https://railway.app/project/your-project',
            vercelDashboard: 'https://vercel.com/your-username/your-project'
        };

        // Update URLs in the dashboard
        function updateDashboardUrls() {
            document.getElementById('backend-url').href = CONFIG.backendUrl;
            document.getElementById('backend-url').textContent = CONFIG.backendUrl;

            document.getElementById('backend-health-url').href = CONFIG.backendUrl + '/actuator/health';
            document.getElementById('backend-health-url').textContent = 'Health Check';

            document.getElementById('frontend-url').href = CONFIG.frontendUrl;
            document.getElementById('frontend-url').textContent = CONFIG.frontendUrl;

            document.getElementById('github-url').href = CONFIG.githubRepo + '/actions';
        }

        // Check backend health
        async function checkBackendHealth() {
            const card = document.getElementById('backend-card');
            const badge = document.getElementById('backend-badge');
            const health = document.getElementById('backend-health');

            badge.innerHTML = '<div class="loading"></div> Checking...';
            badge.className = 'status-badge badge-pending';

            try {
                const response = await fetch(CONFIG.backendUrl + '/actuator/health', {
                    method: 'GET',
                    mode: 'cors'
                });

                if (response.ok) {
                    const data = await response.json();
                    badge.textContent = 'Healthy';
                    badge.className = 'status-badge badge-healthy';
                    card.className = 'status-card healthy';
                    health.textContent = 'Online';
                } else {
                    throw new Error('Health check failed');
                }
            } catch (error) {
                badge.textContent = 'Unhealthy';
                badge.className = 'status-badge badge-unhealthy';
                card.className = 'status-card unhealthy';
                health.textContent = 'Offline or not configured';
            }
        }

        // Check frontend health
        async function checkFrontendHealth() {
            const card = document.getElementById('frontend-card');
            const badge = document.getElementById('frontend-badge');
            const build = document.getElementById('frontend-build');

            badge.innerHTML = '<div class="loading"></div> Checking...';
            badge.className = 'status-badge badge-pending';

            try {
                const response = await fetch(CONFIG.frontendUrl, {
                    method: 'HEAD',
                    mode: 'no-cors'
                });

                // Since we can't read the response due to CORS, assume success if no error
                badge.textContent = 'Live';
                badge.className = 'status-badge badge-healthy';
                card.className = 'status-card healthy';
                build.textContent = 'Successful';
            } catch (error) {
                badge.textContent = 'Down';
                badge.className = 'status-badge badge-unhealthy';
                card.className = 'status-card unhealthy';
                build.textContent = 'Failed or not configured';
            }
        }

        // Check database health (via backend)
        async function checkDatabaseHealth() {
            const card = document.getElementById('database-card');
            const badge = document.getElementById('database-badge');
            const connection = document.getElementById('database-connection');

            badge.innerHTML = '<div class="loading"></div> Checking...';
            badge.className = 'status-badge badge-pending';

            try {
                const response = await fetch(CONFIG.backendUrl + '/actuator/health/db', {
                    method: 'GET',
                    mode: 'cors'
                });

                if (response.ok) {
                    badge.textContent = 'Connected';
                    badge.className = 'status-badge badge-healthy';
                    card.className = 'status-card healthy';
                    connection.textContent = 'Active';
                } else {
                    throw new Error('Database check failed');
                }
            } catch (error) {
                badge.textContent = 'Disconnected';
                badge.className = 'status-badge badge-unhealthy';
                card.className = 'status-card unhealthy';
                connection.textContent = 'Failed or not configured';
            }
        }

        // Open GitHub Actions
        function openGitHubActions() {
            window.open(CONFIG.githubRepo + '/actions', '_blank');
        }

        // Update timestamps
        function updateTimestamps() {
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString();

            // Mock deployment times (replace with real API calls)
            document.getElementById('backend-deploy-time').textContent = '2 hours ago';
            document.getElementById('frontend-deploy-time').textContent = '1 hour ago';
        }

        // Auto-refresh health checks
        function autoRefresh() {
            checkBackendHealth();
            checkFrontendHealth();
            checkDatabaseHealth();
            updateTimestamps();
        }

        // Initialize dashboard
        function initDashboard() {
            updateDashboardUrls();
            updateTimestamps();

            // Initial health checks
            setTimeout(() => {
                checkBackendHealth();
                checkFrontendHealth();
                checkDatabaseHealth();
            }, 1000);

            // Auto-refresh every 5 minutes
            setInterval(autoRefresh, 5 * 60 * 1000);
        }

        // Setup status checker
        function checkSetupStatus() {
            const steps = document.querySelectorAll('.setup-step');

            // You can customize this logic based on your actual setup status
            // For now, we'll simulate the status

            if (CONFIG.backendUrl !== 'https://your-backend.up.railway.app') {
                steps[0].style.borderLeft = '4px solid #4CAF50';
                steps[1].style.borderLeft = '4px solid #4CAF50';
            }

            if (CONFIG.frontendUrl !== 'https://your-app.vercel.app') {
                steps[2].style.borderLeft = '4px solid #4CAF50';
            }
        }

        // Start the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            initDashboard();
            checkSetupStatus();

            // Add some visual flair
            setTimeout(() => {
                document.querySelectorAll('.status-card').forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transform = 'translateY(0)';
                        card.style.opacity = '1';
                    }, index * 100);
                });
            }, 100);
        });

        // Console welcome message
        console.log(`
üöÄ Deployment Dashboard Loaded!

To configure your URLs:
1. Update CONFIG object in this script
2. Replace 'your-backend.up.railway.app' with your actual Railway URL
3. Replace 'your-app.vercel.app' with your actual Vercel URL
4. Replace GitHub repository URL

Current Configuration:
- Backend: ${CONFIG.backendUrl}
- Frontend: ${CONFIG.frontendUrl}
- GitHub: ${CONFIG.githubRepo}
        `);
    </script>
</body>
</html>
